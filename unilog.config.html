<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>unilog.config documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Unilog</span> <span class="project-version">0.7.19</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unilog</span></div></div></li><li class="depth-2 branch current"><a href="unilog.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2"><a href="unilog.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="unilog.config.html#var-appender-config"><div class="inner"><span>appender-config</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-appender"><div class="inner"><span>build-appender</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-encoder"><div class="inner"><span>build-encoder</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-rolling-policy"><div class="inner"><span>build-rolling-policy</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-triggering-policy"><div class="inner"><span>build-triggering-policy</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-default-configuration"><div class="inner"><span>default-configuration</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-default-encoder"><div class="inner"><span>default-encoder</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-default-pattern"><div class="inner"><span>default-pattern</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-levels"><div class="inner"><span>levels</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-start-appender.21"><div class="inner"><span>start-appender!</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-start-logging.21"><div class="inner"><span>start-logging!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">unilog.config</h1><div class="doc"><div class="markdown"><p>Small veneer on top of logback. Originally based on the logging initialization in riemann. Now diverged quite a bit.</p>
<p>For configuration, a single public function is exposed: <code>start-logging!</code> which takes care of configuring logback, later logging is done through standard facilities, such as <a href="https://github.com/clojure/tools.logging">clojure.tools.logging</a>.</p>
<p>Two extension mechanism are provided to add support for more appenders and encoders, see <code>build-appender</code> and <code>build-encoder</code> respectively</p></div></div><div class="public anchor" id="var-appender-config"><h3>appender-config</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Called by walking through each key/val pair in the main configuration map. This allows for early transformation of quick access keys such as: <code>:console</code>, <code>:file</code>, and <code>:files</code></p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L73">view source</a></div></div><div class="public anchor" id="var-build-appender"><h3>build-appender</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a prepared configuration map, associate a prepared appender to the <code>:appender</code> key.</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L204">view source</a></div></div><div class="public anchor" id="var-build-encoder"><h3>build-encoder</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a prepared configuration map, associate a prepared encoder to the <code>:encoder</code> key.</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L123">view source</a></div></div><div class="public anchor" id="var-build-rolling-policy"><h3>build-rolling-policy</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a configuration map, build a RollingPolicy instance.</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L149">view source</a></div></div><div class="public anchor" id="var-build-triggering-policy"><h3>build-triggering-policy</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a configuration map, build a TriggeringPolicy instance.</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L190">view source</a></div></div><div class="public anchor" id="var-default-configuration"><h3>default-configuration</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A simple default logging configuration</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L61">view source</a></div></div><div class="public anchor" id="var-default-encoder"><h3>default-encoder</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default encoder and pattern configuration</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L56">view source</a></div></div><div class="public anchor" id="var-default-pattern"><h3>default-pattern</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default pattern for PatternLayoutEncoder</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L52">view source</a></div></div><div class="public anchor" id="var-levels"><h3>levels</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Logging level names to logback level association</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L42">view source</a></div></div><div class="public anchor" id="var-start-appender.21"><h3>start-appender!</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Start an appender according to appender type</p></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L273">view source</a></div></div><div class="public anchor" id="var-start-logging.21"><h3>start-logging!</h3><div class="usage"><code>(start-logging! raw-config)</code><code>(start-logging!)</code></div><div class="doc"><div class="markdown"><p>Initialize logback logging from a map.</p>
<p>The map accepts the following keys as keywords  - <code>:level</code>: Default level at which to log.  - <code>:pattern</code>: The pattern to use for logging text messages  - <code>:console</code>: Append messages to the console using a simple pattern  layout. If value is a boolean, treat it as such and use a default  encoder. If value is a string, treat it as a pattern and use  a pattern encoder. If value is a map, expect encoder configuration  in the map.  - <code>:file</code>: A file to log to. May either be a string, the log file, or  a map which accepts optional encoder configuration.  - <code>:files</code>: A list of either strings or maps. strings will create  text files, maps are expected to contain a <code>:path</code> key as well  as an optional <code>:json</code> which when present and true will switch  the layout to a JSONEventLayout for the logger.  - <code>:overrides</code>: A map of namespace or class-name to log level,  this will supersede the global level.  - <code>:external</code>: Do not proceed with configuration, this  is useful when logging configuration is provided  in a different manner (by supplying your own logback config file  for instance).</p>
<p>When called with no arguments, assume an empty map</p>
<p>example:</p>
<pre><code class="clojure">{:console   true
 :level     "info"
 :files     ["/var/log/app.log"
             {:file "/var/log/app-json.log"
              :encoder json}]
 :overrides {"some.namespace" "debug"}}
</code></pre></div></div><div class="src-link"><a href="https://github.com/pyr/unilog/blob/0.7.19/src/unilog/config.clj#L300">view source</a></div></div></div></body></html>